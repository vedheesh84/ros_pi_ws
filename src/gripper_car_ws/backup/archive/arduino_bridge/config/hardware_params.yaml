#
# HARDWARE PARAMETERS - Mobile Manipulator
# =========================================
#
# DESCRIPTION:
#   Physical robot parameters for hardware bridge
#   Calibration values for accurate odometry and control
#
# MOBILE BASE PARAMETERS:
#   - Wheel dimensions and spacing
#   - Encoder specifications
#   - Motor characteristics
#
# ARM PARAMETERS:
#   - Servo calibration
#   - Joint angle mappings
#
# USAGE:
#   Loaded by unified_hardware_bridge.py
#

# ============================================================================
# SERIAL COMMUNICATION
# ============================================================================
serial:
  port: /dev/ttyACM0           # Arduino serial port
  baud_rate: 115200            # Communication speed
  timeout: 1.0                 # Read timeout (seconds)

# ============================================================================
# MOBILE BASE - Physical dimensions
# ============================================================================
mobile_base:
  # Wheel parameters
  wheel_radius: 0.075          # Wheel radius (meters) - 75mm diameter wheels
  wheel_base: 0.67             # Distance between left/right wheels (meters)
  wheelbase_length: 0.66       # Distance between front/back wheels (meters)

  # Encoder parameters
  encoder_ticks_per_rev: 360   # Encoder resolution (ticks per wheel revolution)
  encoder_direction:           # Encoder count direction
    front_left: 1              # 1 = forward is positive, -1 = forward is negative
    front_right: -1
    back_left: 1
    back_right: -1

  # Motor parameters
  max_motor_speed: 255         # PWM range (0-255 for L298N)
  motor_deadband: 30           # Minimum PWM to overcome friction

  # Velocity limits
  max_linear_velocity: 0.5     # Maximum forward velocity (m/s)
  max_angular_velocity: 1.0    # Maximum rotation velocity (rad/s)

# ============================================================================
# ROBOTIC ARM - Servo calibration
# ============================================================================
robotic_arm:
  # PCA9685 servo driver
  pca9685_address: 0x40        # I2C address
  pwm_frequency: 50            # Servo PWM frequency (Hz)

  # Servo pulse width calibration (microseconds)
  # Format: [min_pulse, max_pulse] for [min_angle, max_angle]
  servo_calibration:
    joint_1:                   # Base rotation
      min_pulse: 500           # Pulse width at -π radians
      max_pulse: 2500          # Pulse width at +π radians
      center_pulse: 1500       # Pulse width at 0 radians

    joint_2:                   # Shoulder
      min_pulse: 500
      max_pulse: 2500
      center_pulse: 1500

    joint_3:                   # Elbow
      min_pulse: 500
      max_pulse: 2500
      center_pulse: 1500

    joint_4:                   # Wrist
      min_pulse: 500
      max_pulse: 2500
      center_pulse: 1500

    gripper_base_joint:        # Gripper rotation
      min_pulse: 500
      max_pulse: 2500
      center_pulse: 1500

    left_gear_joint:           # Gripper open/close
      min_pulse: 1000          # Closed position
      max_pulse: 2000          # Open position (45 degrees)
      center_pulse: 1500       # Half-open

# ============================================================================
# CONTROL RATES
# ============================================================================
rates:
  publish_rate: 50.0           # State publishing rate (Hz)
  command_timeout: 0.5         # Command watchdog timeout (seconds)
  controller_update_rate: 100  # Controller update rate (Hz)

# ============================================================================
# ODOMETRY
# ============================================================================
odometry:
  frame_id: odom               # Odometry frame name
  child_frame_id: body_link    # Robot base frame name
  publish_tf: true             # Publish odom->body_link transform

  # Covariance values (tune based on testing)
  pose_covariance_diagonal: [0.001, 0.001, 0.001, 0.001, 0.001, 0.03]
  twist_covariance_diagonal: [0.001, 0.001, 0.001, 0.001, 0.001, 0.03]
